'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;class SpreadSheetJoint{constructor(sourceTable,destTable,keyName,joinProp){this.sourceTable=sourceTable;this.destTable=destTable;this.keyName=keyName;this.joinProp=joinProp;this.destIdProp=this.destTable.getIdProp();this.destTableName=this.destTable.sheet.getName();this.type="left"}sWhere(col_name,cmp,value){this.sourceTable.query.where(col_name,cmp,value);return this}dWhere(col_name,cmp,value){this.destTable.query.where(col_name,cmp,value);return this}setType(type){this.type=type;return this}toJSON(numRecords){var _this=this;var results=[];var sResults=this.sourceTable.query.toJSON(numRecords);var dResults=this.destTable.query.toJSON();if(!dResults||!dResults.length){if(this.type==="left")return sResults;else return results}var _loop=function _loop(sRecord){var foreignKeyValue=sRecord[_this.keyName];var dRecord=dResults.find(obj=>obj[_this.destIdProp]===foreignKeyValue);if(_this.type==="inner"&&!dRecord)return"continue";results.push(Object.assign(sRecord,{[_this.joinProp||_this.destTableName]:dRecord}))};for(var sRecord of sResults){var _ret=_loop(sRecord);if(_ret==="continue")continue}return results}}var _default=SpreadSheetJoint;exports.default=_default;